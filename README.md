# My Master Thesis Pipeline

## Information:
+ **.flo** file format [specification](http://vision.middlebury.edu/flow/code/flow-code/README.txt).

## Large Distance Optical Flow: Can deal with occlusion
+ **LDOF**: Generated by T. Brox' freely available [Motion Segmenation Code](http://lmb.informatik.uni-freiburg.de/resources/binaries/eccv2010_mosegLinux64.zip). 

## Point Tracking that generate Trajectories 
Implementation of [this paper](http://lmb.informatik.uni-freiburg.de/people/brox/pub/sundaram_eccv10.pdf)

## Segmentation via Spectral clustering of Trajectories
Implementation of [this paper](http://ieeexplore.ieee.org/stamp/stamp.jsp?tp=&arnumber=6682905)

## Requirements
+ Matlab
+ JRuby
+ Bundler
+ Git

## Installation

### Mac OS X / Linux

First, install a recent Matlab version. Next, open your terminal of choice and enter the following commands in the given order:

1. Install RVM: `\curl -sSL https://get.rvm.io | bash -s stable`
 + Ruby version manager to have clean ruby dependency management.
2. Install Jruby: `rvm install jruby-9.0.1.0`
 + Special version of Ruby supporting real multi threading, running on java's vm.
3. Install Bundler: `gem install bundler`
 + Ruby Plugin manager: makes sure all required dependencies are installed. Dependencies are in the **Gemfile** defined.
4. Fetch source of this Repsitory: `git clone https://github.com/simplay/ma_my_pipeline.git`
5. Change path to target directory: `cd path_to_target_directory_in_cloned_repo`
6. Install required ruby plugins and setup their dependencies: `bundle`

## Usages
+ Run the **extract trajectories script**: 
 + Enter `cd ./extract_trackings/`
 + Enter `ruby extract.rb cars1/` to extract all trajectories from the computed trackings files located at `./output/trajectories/cars1/`.
+ Run the **compute similarity script**: 
 + Enter `cd ./compute_trajectory_similarities/`
 + Enter `ruby compute_similarities.rb traj_out_cars1_fc_4.txt` to compute the similarities bewtween the trajectories stored the in file `traj_out_cars1_fc_4.txt`. Note that the script assumes, that the file is stored in `./output/trajectories/`.
 + Enter to use 8gb memory while running the script: `ruby -J-Xmx8000m compute_similarities.rb traj_out_cars1_fc_4.txt`
